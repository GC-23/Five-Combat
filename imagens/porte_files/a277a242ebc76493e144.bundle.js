/*! For license information please see a277a242ebc76493e144.bundle.js.LICENSE.txt */
(window["app-designer_WP_JSONP"]=window["app-designer_WP_JSONP"]||[]).push([[30],{3251:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(3252)).default;t.default=a},3252:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(56)),i=r(n(57)),o=r(n(14)),l=r(n(0)),u=r(n(2)),s=n(168),d=n(3253),c=n(554),g=n(166),p=n(143),f=r(n(131)),m=n(32),v=n(210),b=n(2158),h=n(413),y=r(n(254)),w=r(n(30)),k=r(n(2025));n(824),n(3254);var x=n(250),P=n(538);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=l.default.lazy((function(){return n.e(0).then(n.t.bind(null,841,7))})),C=function(e){var t,n,r,o,u=e.data,O=e.metaData,C=e.onUpdateData,j=(e.property,e.treeId,e.flatTree,(0,g.useSelector)((function(e){var t=e.api,n=e.designer;return{logoUniqueSiteId:t.logoUniqueSiteId,imageSearchQuery:n.edit.tree.metadata.topicQuery}}))),I=j.logoUniqueSiteId,T=j.imageSearchQuery,D=null===(t=(0,v.getEditorContext)().selectedControl)||void 0===t||null===(n=t.model)||void 0===n||null===(r=n.layout)||void 0===r||null===(o=r.listItem)||void 0===o?void 0:o.id,U=l.default.useContext(c.ImageLibraryContext).openImagePicker,z=u||{},A=(0,s.useParams)(),E=function(e){C(S(S({},z),{},{link:e}),!0)},H=function(e,t,n){var r,a,i,o,l=function(e,t){var n=S(S({},z),{},{source:e.source,crop:t});return delete n.url,t||delete n.crop,delete n.originalSize,delete n.sizes,delete n.temp_value,delete n.valueForDarkBacks,e.original&&(n.value=e.original),e.description&&(n.altText=e.description),e.originalWidth&&(n.originalSize={width:e.originalWidth,height:e.originalHeight}),"facebook"===n.source&&(0,x.makeTempImageAndPrepareStoringImage)(n,"value"),n}(e,t);(null==e||null===(r=e.user)||void 0===r?void 0:r.name)&&(null==e||null===(a=e.user)||void 0===a?void 0:a.username)?(l.authorName=e.user.name,l.authorUsername=e.user.username):(delete l.authorName,delete l.authorUsername),O&&O.showLogo&&(null===(i=(0,m.getRuntimeConfig)()._settings)||void 0===i||null===(o=i.editor)||void 0===o?void 0:o.supportslogo)&&(l.source&&l.value||(l={source:e.preview_image_url,value:e.preview_image_url})),l.noCdn=e.noCdn,(0,x.processAllTempImageUrls)(l).then((function(){var e,t,r;(C(l,!0),null!=n&&k.default.isProcessingTask(n))&&(k.default.markTaskComplete(n),k.default.isProcessing||(null===(e=k.default.pendingSave)||void 0===e||e.call(),null===(t=k.default.pendingAutoSave)||void 0===t||t.call(),null===(r=k.default.pendingPublish)||void 0===r||r.call(),k.default.pendingSave=null,k.default.pendingAutoSave=null,k.default.pendingPublish=null))}))},L=function(){var e=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,l,u,s,d,c,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.siteId,r={original:t.base64,thumbnail:t.base64,source:"base64",noCdn:!0,user:t.user},H(r),i=k.default.addTask(),e.next=6,(0,b.uploadImage)(t.base64,n);case 6:o=e.sent,l=w.default.useCloudflareCdn?"cloudflareHosted":"cloudflare",u=new y.default(o[0].thumbnail,l),s=D?"list-item":"content",d=(0,h.getPreferredSize)(s,null),u.resizeToWidth(d),c=u.result(),(g=new Image).onload=function(){var e=o[0];if(e.noCdn=!1,Array.isArray(window.imageTasks)&&window.imageTasks.length>0){var n=window.imageTasks.shift();n.base64===t.base64&&H(e,n.crop,i)}else H(e,null,i)},g.src=c;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){O&&O.shouldOpenLinkEditor?f.default.activate({type:"modal",content:_,hasBackdropClickDisabled:!0,data:{pages:O.pages,link:z&&z.link||{},onChange:function(e,t){E(e.link),f.default.deactivate(),t()}}}):function(){var e,t,n,r=[],a=(0,d.buildHref)(I),i=A.siteId;i&&r.push({key:"siteId",value:i});var o=S(S({},(0,P.getImageLibraryAuthProperties)()),{},{searchQuery:T,product:"expresseditor",mobileDrawerOpen:!1,data:{},returnBase64:!0,useBearerAuth:"string"==typeof(null===(e=window.expresseditor)||void 0===e?void 0:e.JWT),setReturnValue:function(e){if(f.default.deactivate(),"base64"in e)L(e);else{var t=e[0];t.noCdn=!1,H(t)}}}),l="creativemail"===(0,m.getRuntimeConfig)()._brand.toLowerCase();O&&O.showLogo&&((null===(t=(0,m.getRuntimeConfig)()._settings)||void 0===t||null===(n=t.editor)||void 0===n?void 0:n.supportslogo)||l)&&!(0,p.isWordpressSite)()&&(o.showLogosTab=!0,o.logoMakerIntegrationUrl=a),r.length>0&&(o.data.tags=r),U(o)}()};return l.default.useEffect((function(){N()}),[]),l.default.createElement("div",{className:"view image-selector"},l.default.createElement("div",null))};C.propTypes={data:u.default.object,metaData:u.default.object,onUpdateData:u.default.func.isRequired,property:u.default.string,treeId:u.default.any.isRequired,flatTree:u.default.object};var j=C;t.default=j},3253:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getSiteObject=t.buildHref=t.stripHtml=t.getColorPalette=void 0;var a=r(n(25)),i=n(40),o=function(e,t){var n=t?t.theme.colors:function(e){if(e&&e[1])return e[e[e[1].theme._treeId].colors._treeId]}(e);return["background","text","accent.0","accent.1"].filter((function(e){return(0,a.default)(n,e)})).map((function(e){return t=(0,a.default)(n,e),"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")");var t}))};t.getColorPalette=o;var l=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText};t.stripHtml=l;t.buildHref=function(e){if(e&&e.id)return(0,i.getUrl)(i.siteNames.APP,"/logo/onboarding?editor=".concat(e.id))};t.getSiteObject=function(e){var t=e.pages.find((function(e){return e.mainPage}))||e._urlspages[0],n=t.headerSection&&t.headerSection.binding||{},r=e.globalBinding.companyName||e.globalBinding.title||n.title||"";return{name:l(r),slogan:"",type:e.metadata.templateName||"",colors:o(void 0,e)}}},3254:function(e,t,n){var r=n(46),a=n(3255);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},3255:function(e,t,n){(t=n(28)(!1)).push([e.i,".image-selector .image-content {\n  padding: 15px; }\n\n.image-selector .icon-container {\n  position: relative;\n  width: 100%;\n  height: 122px;\n  color: white;\n  font-size: 106px; }\n  .image-selector .icon-container:hover {\n    cursor: pointer;\n    opacity: 0.8; }\n\n.image-selector .image-container {\n  width: 100%;\n  height: 200px;\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n  background-color: black;\n  margin-bottom: 15px; }\n  .image-selector .image-container .image {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    background-position: center center;\n    background-size: cover;\n    background-repeat: no-repeat;\n    opacity: 1;\n    transition: opacity 150ms ease-in-out; }\n  .image-selector .image-container .button {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .image-selector .image-container .button .replace-image-button {\n      border-radius: 4px !important;\n      background: #4D5567 !important;\n      transition: all 150ms ease-in-out !important; }\n      .image-selector .image-container .button .replace-image-button i {\n        color: white !important; }\n  .image-selector .image-container:hover .image {\n    opacity: 0.6;\n    transition: opacity 150ms ease-in-out; }\n  .image-selector .image-container:hover .button .replace-image-button {\n    background: #0076DF !important;\n    transition: all 150ms ease-in-out !important; }\n\n.image-selector .popover-title {\n  text-transform: uppercase; }\n\n.image-selector .suggested-images {\n  width: 100%;\n  height: auto;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-gap: 6px;\n  margin-top: 10px; }\n  .image-selector .suggested-images .suggested-image {\n    height: 66px;\n    background-color: #4D5567;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    border-radius: 4px;\n    cursor: pointer;\n    position: relative; }\n    .image-selector .suggested-images .suggested-image:after {\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      border-radius: 4px;\n      background: rgba(0, 0, 0, 0);\n      border: 2px solid transparent; }\n    .image-selector .suggested-images .suggested-image:hover:after {\n      background: rgba(0, 0, 0, 0.3);\n      border: 2px solid #0076DF; }\n",""]),e.exports=t}}]);
//# sourceMappingURL=a277a242ebc76493e144.bundle.js.map